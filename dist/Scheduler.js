module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t){e.exports=require("react/jsx-runtime")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("@mui/material")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@mui/lab/DatePicker")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("@mui/icons-material/NavigateNextRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowRightRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowLeftRounded")},function(e,t){e.exports=require("@mui/icons-material/NavigateBeforeRounded")},function(e,t){e.exports=require("date-fns/locale/en-US")},function(e,t){e.exports=require("@mui/icons-material/EditRounded")},function(e,t){e.exports=require("@mui/icons-material/DeleteRounded")},function(e,t){e.exports=require("@mui/icons-material/EventNoteRounded")},function(e,t){e.exports=require("@mui/icons-material/ClearRounded")},function(e,t){e.exports=require("@mui/icons-material/SupervisorAccountRounded")},function(e,t){e.exports=require("@mui/material/styles")},function(e,t){e.exports=require("@mui/lab/LocalizationProvider")},function(e,t){e.exports=require("@mui/lab/AdapterDateFns")},function(e,t){e.exports=require("@mui/icons-material/MoreVert")},function(e,t){e.exports=require("@mui/lab/DateTimePicker")},function(e,t){e.exports=require("@mui/icons-material/ExpandMore")},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return qe}));var r=n(0),a=n(3),s=n(1);const i=(e,t,n)=>{var r;const a=(null===(r=e.config)||void 0===r?void 0:r.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),s=a?t?[t]:[]:t;return{value:s,validity:a?s.length:s}},c=(e,t,n,r)=>{var a;const s=n.idField,i=r.find(e=>e.name===s),c=!!(null===(a=null==i?void 0:i.config)||void 0===a?void 0:a.multiple);let o=[];for(const r of e){const e=c&&!Array.isArray(r[s])?[r[s]]:r[s];(c?e.includes(t[s]):e===t[s])&&o.push(Object.assign(Object.assign({},r),{color:r.color||t[n.colorField||""]}))}return o},o=(e,t)=>Math.ceil(e)/t,l=(e,t)=>Math.max(e/t,60);var d=n(10),j=n.n(d);const u={height:600,month:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17},week:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17,step:60},day:{startHour:9,endHour:17,step:60},view:"week",selectedDate:new Date,events:[],remoteEvents:void 0,fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceFields:{idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:j.a},b=Object(a.createContext)(Object.assign(Object.assign({},u),{mounted:!1,dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}})),O=(e,t)=>{switch(t.type){case"updateProps":return Object.assign(Object.assign({},e),t.payload);case"set":const{name:n,value:r}=t.payload;return Object.assign(Object.assign({},e),{[n]:r});case"triggerDialog":const a=t.payload.selected;return Object.assign(Object.assign({},e),{dialog:t.payload.status,selectedRange:(null==a?void 0:a.event_id)?null:a,selectedEvent:(null==a?void 0:a.event_id)?a:null});case"triggerLoading":return Object.assign(Object.assign({},e),{loading:t.payload});default:return e}};var h=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const p=e=>{const t=e.view&&e[e.view]?e.view:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(e);return Object.assign(Object.assign({},e),{view:t,dialog:!1,mounted:!1,selectedRange:void 0,fields:[...u.fields,...e.fields||[]]})},g=({initial:e,children:t})=>{const{events:n,resources:c,resourceViewMode:o,month:l,week:d,day:j,fields:u,locale:g,direction:y,loading:f,onEventDrop:v}=e,[m,x]=Object(a.useReducer)(O,p(e)),w=(e,t)=>{x({type:"set",payload:{name:t,value:e}})};Object(a.useEffect)(()=>{m.mounted?x({type:"updateProps",payload:{events:n,resources:c,resourceViewMode:o,month:l,week:d,day:j,fields:u,locale:g,direction:y,loading:f}}):w(!0,"mounted")},[n,c,o,l,d,j,u,g,y,f]);const _=(e,t)=>{let n;n="edit"===t?m.events.map(t=>t.event_id===e.event_id?e:t):[...m.events,e],w(n,"events")},D=()=>(e=>{let t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(m),k=e=>{void 0===f&&x({type:"triggerLoading",payload:e})};return Object(r.jsx)(b.Provider,Object.assign({value:Object.assign(Object.assign({},m),{handleState:w,getViews:D,triggerDialog:(e,t)=>{x({type:"triggerDialog",payload:{status:e,selected:t}})},triggerLoading:k,handleGotoDay:e=>{const t=D();t.includes("day")?(w("day","view"),w(e,"selectedDate")):t.includes("week")?(w("week","view"),w(e,"selectedDate")):console.warn("No Day/Week views available")},confirmEvent:_,onDrop:(e,t,n,r)=>h(void 0,void 0,void 0,(function*(){var a;const c=m.events.find(t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e),o=m.fields.find(e=>e.name===n),l=!!(null===(a=null==o?void 0:o.config)||void 0===a?void 0:a.multiple);let d=r;if(o){const e=c[n],a=i(o,e,c).value;if(l)if(a.includes(r)){if(Object(s.isEqual)(c.start,t))return;d=a}else d=a.length>1?[...a,r]:[r]}if(Object(s.isEqual)(c.start,t)&&(!d||!l&&d===c[n]))return;const j=Object(s.differenceInMinutes)(c.end,c.start),u=Object.assign(Object.assign({},c),{start:t,end:Object(s.addMinutes)(t,j),[n]:d||""});if(!v||"function"!=typeof v)return _(u,"edit");try{k(!0);const e=yield v(t,u,c);e&&_(e,"edit")}finally{k(!1)}}))})},{children:t}))};var y=n(2);var f=({date:e,onClick:t,locale:n})=>Object(r.jsxs)("div",{children:[Object(r.jsx)(y.Typography,Object.assign({style:{fontWeight:Object(s.isToday)(e)?"bold":"inherit"},color:Object(s.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:Object(s.format)(e,"dd",{locale:n})})),Object(r.jsx)(y.Typography,Object.assign({color:Object(s.isToday)(e)?"primary":"inherit",style:{fontWeight:Object(s.isToday)(e)?"bold":"inherit",fontSize:11}},{children:Object(s.format)(e,"eee",{locale:n})}))]});const v=()=>Object(a.useContext)(b);var m=n(7),x=n.n(m),w=n(8),_=n.n(w),D=n(11),k=n.n(D),C=n(12),M=n.n(C),T=n(13),S=n.n(T),I=n(14),E=n.n(I),F=n(15),P=n.n(F);const W=Object(y.styled)("div")(({theme:e})=>({position:"relative",overflow:"hidden","& .rs__table_loading":{background:"#ffffff70",position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:9,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}})),$=Object(y.styled)("div")(({resource_count:e})=>({position:"relative",display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,width:"100%",overflowX:"auto",overflowY:"hidden"})),N=Object(y.styled)("div")(({days:e,indent:t="1",theme:n})=>({position:"relative",display:"grid",gridTemplateColumns:+t>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,[n.breakpoints.down("sm")]:{gridTemplateColumns:+t>0?`30px repeat(${e}, 1fr)`:""},"&:first-of-type":{borderStyle:"solid",borderColor:"#eee",borderWidth:"0 1px 1px 0"},"& .rs__cell":{position:"relative","&.rs__header > :first-of-type":{padding:"2px 5px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",[n.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},borderColor:"#eee",borderWidth:"1px 0px 0px 1px",borderStyle:"solid","& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:Object(y.alpha)(n.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}}})),q=Object(y.styled)("div")(()=>({minWidth:400,maxWidth:"95%","& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between"}}}));var H=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const R=({event:e,multiday:t,hasPrev:n,hasNext:i,showdate:c})=>{const{triggerDialog:o,onDelete:l,events:d,handleState:j,triggerLoading:u,viewerExtraComponent:b,fields:O,direction:h,resources:p,resourceFields:g,locale:f,viewerTitleComponent:m}=v(),[w,D]=Object(a.useState)(null),[C,T]=Object(a.useState)(!1),I=Object(y.useTheme)(),F="rtl"===h?_.a:x.a,W="rtl"===h?x.a:_.a,$=e=>{!e&&C&&T(!1),D(e||null)},N=()=>H(void 0,void 0,void 0,(function*(){try{u(!0);let t=e.event_id;if(l){const e=yield l(t);t=e||""}if(t){const e=d.filter(e=>e.event_id!==t);j(e,"events"),$()}}catch(e){console.error(e)}finally{u(!1)}}));let R=Object(r.jsxs)("div",Object.assign({style:{padding:2}},{children:[Object(r.jsx)(y.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),c&&Object(r.jsx)(y.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${Object(s.format)(e.start,"hh:mm a",{locale:f})} - ${Object(s.format)(e.end,"hh:mm a",{locale:f})}`}))]}));t&&(R=Object(r.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[Object(r.jsx)(y.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:n?Object(r.jsx)(W,{fontSize:"small",sx:{display:"flex"}}):c&&Object(s.format)(e.start,"hh:mm a",{locale:f})})),Object(r.jsx)(y.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),Object(r.jsx)(y.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:i?Object(r.jsx)(F,{fontSize:"small",sx:{display:"flex"}}):c&&Object(s.format)(e.end,"hh:mm a",{locale:f})}))]})));return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(y.Paper,Object.assign({style:{width:"100%",height:"100%",display:"block",background:e.disabled?"#d0d0d0":e.color||I.palette.primary.main,color:e.disabled?"#808080":I.palette.primary.contrastText,cursor:e.disabled?"not-allowed":"pointer",overflow:"hidden"}},{children:Object(r.jsx)(y.ButtonBase,Object.assign({onClick:e=>{e.preventDefault(),e.stopPropagation(),$(e.currentTarget)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"}},{children:Object(r.jsx)("div",Object.assign({style:{height:"100%"},draggable:!0,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",""+e.event_id),t.currentTarget.style.backgroundColor=I.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||I.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}},{children:R}))}))})),Object(r.jsx)(y.Popover,Object.assign({open:Boolean(w),anchorEl:w,onClose:e=>{$()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:(()=>{const t=g.idField,n=p.filter(n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]);return Object(r.jsxs)(q,{children:[Object(r.jsxs)("div",Object.assign({style:{background:e.color||I.palette.primary.main,color:I.palette.primary.contrastText}},{children:[Object(r.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[Object(r.jsx)("div",{children:Object(r.jsx)(y.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>{$()}},{children:Object(r.jsx)(E.a,{color:"disabled"})}))}),Object(r.jsxs)("div",Object.assign({style:{display:"inherit"}},{children:[Object(r.jsx)(y.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>{$(),o(!0,e)}},{children:Object(r.jsx)(k.a,{})})),!C&&Object(r.jsx)(y.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>T(!0)},{children:Object(r.jsx)(M.a,{})})),Object(r.jsx)(y.Slide,Object.assign({in:C,direction:"rtl"===h?"right":"left",mountOnEnter:!0,unmountOnExit:!0},{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(y.Button,Object.assign({style:{color:I.palette.error.main},size:"small",onClick:N},{children:"DELETE"})),Object(r.jsx)(y.Button,Object.assign({style:{color:I.palette.action.disabled},size:"small",onClick:()=>T(!1)},{children:"CANCEL"}))]})}))]}))]})),m instanceof Function?m(e):Object(r.jsx)(y.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}))]})),Object(r.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[Object(r.jsxs)(y.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[Object(r.jsx)(S.a,{})," ",`${Object(s.format)(e.start,"dd MMMM yyyy hh:mm a",{locale:f})} - ${Object(s.format)(e.end,"dd MMMM yyyy hh:mm a",{locale:f})}`]})),n.length>0&&Object(r.jsxs)(y.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[Object(r.jsx)(P.a,{})," ",n.map(e=>e[g.textField]).join(", ")]})),b instanceof Function?b(O,e):b]}))]})})()}))]})};R.defaultProps={multiday:!1,showdate:!0};var B=R;const z=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:n,resources:s,direction:i,resourceViewMode:c}=v(),{width:o}=function(){const[e,t]=Object(a.useState)({width:0,height:0});return Object(a.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{t(e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e})};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}},[]),e}(),l=e[n.textField],d=e[n.subTextField||""],j=e[n.avatarField||""],u=e[n.colorField||""];if(t instanceof Function)return t(e);const b="tabs"===c?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return Object(r.jsxs)(y.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===i?"right":"left"},b),component:"span"},{children:[Object(r.jsx)(y.ListItemAvatar,{children:Object(r.jsx)(y.Avatar,{style:{background:u},alt:l,src:j})}),Object(r.jsx)(y.ListItemText,{primary:Object(r.jsx)(y.Typography,Object.assign({variant:"body2",noWrap:!0},{children:l})),secondary:Object(r.jsx)(y.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:d})),style:{width:o/(s.length+1)}})]}))};var A=n(5),L=n.n(A),V=n(16),G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function K(e){const{children:t,value:n,index:a}=e,s=G(e,["children","value","index"]);return n===a?Object(r.jsx)(y.Box,Object.assign({},s,{children:t})):Object(r.jsx)(r.Fragment,{})}K.propTypes={children:L.a.node,index:L.a.any.isRequired,value:L.a.any.isRequired};const Q=Object(V.styled)("div")(({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px","& button.MuiTab-root":{borderRight:"1px solid #eee"}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}})),X=({tabs:e,variant:t,tab:n,setTab:a,indicator:s,style:i})=>Object(r.jsxs)(Q,Object.assign({style:i},{children:[Object(r.jsx)(y.Tabs,Object.assign({value:n,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s}},{children:e.map((e,t)=>{return Object(r.jsx)(y.Tab,Object.assign({label:e.label,value:e.id},{id:"scrollable-auto-tab-"+(n=e.id),"aria-controls":"scrollable-auto-tabpanel-"+n},{onClick:()=>a(e.id),onDragEnter:()=>a(e.id)}),e.id||t);var n})})),e.map((e,t)=>e.component&&Object(r.jsx)(K,Object.assign({value:n,index:e.id},{children:e.component}),t))]}));X.defaultProps={variant:"scrollable",indicator:"primary"};const Z=({renderChildren:e})=>{const{resourceViewMode:t}=v();return"tabs"===t?Object(r.jsx)(Y,{renderChildren:e}):Object(r.jsx)(U,{renderChildren:e})},U=({renderChildren:e})=>{const{resources:t,resourceFields:n}=v();return Object(r.jsx)(r.Fragment,{children:t.map((t,a)=>Object(r.jsxs)("div",{children:[Object(r.jsx)(z,{resource:t}),e(t)]},`${t[n.idField]}_${a}`))})},Y=({renderChildren:e})=>{const{resources:t,resourceFields:n,selectedResource:a,handleState:s}=v(),i=t.map(t=>({id:t[n.idField],label:Object(r.jsx)(z,{resource:t}),component:Object(r.jsx)(r.Fragment,{children:e(t)})}));return Object(r.jsx)(X,{tabs:i,tab:a||t[0][n.idField],setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})};Z.defaultProps={span:1};const J=({start:e,end:t,resourceKey:n,resourceVal:a,children:s})=>{const{triggerDialog:i,onDrop:c}=v(),o=Object(y.useTheme)();return Object(r.jsx)(y.Button,Object.assign({fullWidth:!0,onClick:()=>{i(!0,{start:e,end:t,[n]:a})},onDragOver:e=>{e.currentTarget.style.backgroundColor=Object(y.alpha)(o.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=Object(y.alpha)(o.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const r=t.dataTransfer.getData("text");c(r,e,n,a)}},{children:s}))};var ee=({todayEvents:e,today:t,startHour:n,step:i,minuteHeight:c,direction:o})=>{const l=[];return Object(r.jsx)(a.Fragment,{children:e.map((a,d)=>{const j=Object(s.differenceInMinutes)(a.end,a.start)*c,u=Object(s.differenceInMinutes)(a.start,Object(s.setHours)(t,n)),b=u*c+(u/i+1),O=((e,t)=>e.filter(e=>e.event_id!==t.event_id&&(Object(s.isWithinInterval)(Object(s.addMinutes)(t.start,1),{start:e.start,end:e.end})||Object(s.isWithinInterval)(Object(s.addMinutes)(t.end,-1),{start:e.start,end:e.end})||Object(s.isWithinInterval)(Object(s.addMinutes)(e.start,1),{start:t.start,end:t.end})||Object(s.isWithinInterval)(Object(s.addMinutes)(e.end,-1),{start:t.start,end:t.end}))))(e,a),h=O.filter(e=>l.includes(e.event_id));return l.push(a.event_id),Object(r.jsx)("div",Object.assign({className:"rs__event__item",style:{height:j,top:b,width:O.length?100/(O.length+1)+"%":"95%",["rtl"===o?"right":"left"]:h.length>0?`calc(100%/${h.length+1})`:""}},{children:Object(r.jsx)(B,{event:a})}),a.event_id)})})},te=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const ne=()=>{const{week:e,selectedDate:t,height:n,events:i,triggerDialog:d,handleGotoDay:j,remoteEvents:u,triggerLoading:b,handleState:O,resources:h,resourceFields:p,fields:g,direction:m,locale:x}=v(),{weekStartOn:w,weekDays:_,startHour:D,endHour:k,step:C,cellRenderer:M}=e,T=Object(s.startOfWeek)(t,{weekStartsOn:w}),S=_.map(e=>Object(s.addDays)(T,e)),I=Object(s.startOfDay)(S[0]),E=Object(s.endOfDay)(S[S.length-1]),F=Object(s.setMinutes)(Object(s.setHours)(t,D),0),P=Object(s.setMinutes)(Object(s.setHours)(t,k),0),W=Object(s.eachMinuteOfInterval)({start:F,end:P},{step:C}),$=l(n,W.length),q=o($,C),H=Object(a.useCallback)(()=>te(void 0,void 0,void 0,(function*(){try{b(!0);const e=`?start=${I}&end=${E}`,t=yield u(e);Array.isArray(t)&&O(t,"events")}catch(e){throw e}finally{b(!1)}})),[t]);Object(a.useEffect)(()=>{u instanceof Function&&H()},[H]);const R=(e,t)=>{const n=Object(s.isSameDay)(I,t);return e.filter(e=>Object(s.differenceInDays)(e.end,e.start)>0&&S.some(t=>Object(s.isWithinInterval)(t,{start:Object(s.startOfDay)(e.start),end:Object(s.endOfDay)(e.end)}))).filter(e=>Object(s.isBefore)(e.start,I)?n:Object(s.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime()).map((a,i)=>{const c=Object(s.isBefore)(Object(s.startOfDay)(a.start),I),o=Object(s.isAfter)(Object(s.endOfDay)(a.end),E),l=Object(s.differenceInDays)(o?E:a.end,c?I:a.start)+1,d=e.filter(e=>!n&&(e.event_id!==a.event_id&&Object(s.isWithinInterval)(t,{start:e.start,end:e.end})));let j=i;return d.length&&(j+=d.length),Object(r.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*j+45,width:100*l+"%"}},{children:Object(r.jsx)(B,{event:a,hasPrev:c,hasNext:o,multiday:!0})}),a.event_id)})},z=e=>{let t=i;e&&(t=c(i,e,p,g));const n=28*i.filter(e=>Object(s.differenceInDays)(e.end,e.start)>0&&S.some(t=>Object(s.isWithinInterval)(t,{start:Object(s.startOfDay)(e.start),end:Object(s.endOfDay)(e.end)}))).length+45;return Object(r.jsxs)(N,Object.assign({days:S.length},{children:[Object(r.jsx)("span",{className:"rs__cell"}),S.map((e,a)=>Object(r.jsxs)("span",Object.assign({className:"rs__cell rs__header "+(Object(s.isToday)(e)?"rs__today_cell":""),style:{height:n}},{children:[Object(r.jsx)(f,{date:e,onClick:j,locale:x}),R(t,e)]}),a)),W.map((n,i)=>Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("span",Object.assign({style:{height:$},className:"rs__cell rs__header rs__time"},{children:Object(r.jsx)(y.Typography,Object.assign({variant:"caption"},{children:Object(s.format)(n,"hh:mm",{locale:x})}))})),S.map((a,c)=>{const o=new Date(`${Object(s.format)(a,"yyyy/MM/dd")} ${Object(s.format)(n,"hh:mm")}`),l=new Date(`${Object(s.format)(a,"yyyy/MM/dd")} ${Object(s.format)(Object(s.addMinutes)(n,C),"hh:mm")}`),j=p.idField;return Object(r.jsxs)("span",Object.assign({className:"rs__cell "+(Object(s.isToday)(a)?"rs__today_cell":"")},{children:[0===i&&Object(r.jsx)(ee,{todayEvents:t.filter(e=>Object(s.isSameDay)(a,e.start)&&!Object(s.differenceInDays)(e.end,e.start)).sort((e,t)=>e.end.getTime()-t.end.getTime()),today:a,minuteHeight:q,startHour:D,step:C,direction:m}),M?M({day:a,start:o,end:l,height:$,onClick:()=>d(!0,{start:o,end:l,[j]:e?e[j]:null}),[j]:e?e[j]:null}):Object(r.jsx)(J,{start:o,end:l,resourceKey:j,resourceVal:e?e[j]:null})]}),c)})]},i))]}))};return h.length?Object(r.jsx)(Z,{renderChildren:z}):z()};var re=n(17),ae=n.n(re),se=n(18),ie=n.n(se);var ce=({children:e})=>{const{locale:t}=v();return Object(r.jsx)(ae.a,Object.assign({dateAdapter:ie.a,locale:t},{children:e}))},oe=n(4),le=n.n(oe),de=n(9),je=n.n(de),ue=n(6),be=n.n(ue);const Oe=({type:e,onClick:t})=>{const{direction:n}=v();let a=be.a;return"prev"===e?a="rtl"===n?be.a:je.a:"next"===e&&(a="rtl"===n?je.a:be.a),Object(r.jsx)(y.IconButton,Object.assign({style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()}},{children:Object(r.jsx)(a,{})}))},he=({selectedDate:e,onChange:t,weekProps:n})=>{const{locale:i}=v(),[c,o]=Object(a.useState)(!1),{weekStartOn:l}=n,d=Object(s.startOfWeek)(e,{weekStartsOn:l}),j=Object(s.endOfWeek)(e,{weekStartsOn:l}),u=()=>o(!c);return Object(r.jsxs)("div",{children:[Object(r.jsx)(Oe,{type:"prev",onClick:()=>{const e=Object(s.addDays)(d,-1);t(e,"selectedDate")}}),Object(r.jsx)(ce,{children:Object(r.jsx)(le.a,{open:c,onClose:u,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:e=>Object(r.jsx)(y.Button,Object.assign({ref:e.inputRef,style:{padding:4},onClick:u},{children:`${Object(s.format)(d,"dd",{locale:i})} - ${Object(s.format)(j,"dd MMMM yyyy",{locale:i})}`}))})}),Object(r.jsx)(Oe,{type:"next",onClick:()=>{const e=Object(s.addDays)(j,1);t(e,"selectedDate")}})]})},pe=({selectedDate:e,onChange:t})=>{const{locale:n}=v(),[i,c]=Object(a.useState)(!1),o=()=>c(!i);return Object(r.jsxs)("div",{children:[Object(r.jsx)(Oe,{type:"prev",onClick:()=>{const n=Object(s.addDays)(e,-1);t(n,"selectedDate")}}),Object(r.jsx)(ce,{children:Object(r.jsx)(le.a,{open:i,onClose:o,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>Object(r.jsx)(y.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:o},{children:""+Object(s.format)(e,"dd, MMMM yyyy",{locale:n})}))})}),Object(r.jsx)(Oe,{type:"next",onClick:()=>{const n=Object(s.addDays)(e,1);t(n,"selectedDate")}})]})},ge=({selectedDate:e,onChange:t})=>{const{locale:n}=v(),[i,c]=Object(a.useState)(!1),o=Object(s.getMonth)(e),l=()=>c(!i);return Object(r.jsxs)("div",{children:[Object(r.jsx)(Oe,{type:"prev",onClick:()=>{const n=o-1;t(Object(s.setMonth)(e,n),"selectedDate")}}),Object(r.jsx)(ce,{children:Object(r.jsx)(le.a,{open:i,onClose:l,openTo:"month",views:["year","month"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>Object(r.jsx)(y.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:l},{children:Object(s.format)(e,"MMMM yyyy",{locale:n})}))})}),Object(r.jsx)(Oe,{type:"next",onClick:()=>{const n=o+1;t(Object(s.setMonth)(e,n),"selectedDate")}})]})};var ye=n(19),fe=n.n(ye);const ve=e=>{switch(e){case"week":return"Неделя";case"month":return"Месяц";case"day":return"День";default:return e}},me=()=>{const{selectedDate:e,view:t,week:n,handleState:s,getViews:i}=v(),[c,o]=Object(a.useState)(null),l=Object(y.useTheme)(),d=Object(y.useMediaQuery)(l.breakpoints.up("sm")),j=i(),u=e=>{o(e||null)};return Object(r.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(()=>{switch(t){case"month":return Object(r.jsx)(ge,{selectedDate:e,onChange:s});case"week":return Object(r.jsx)(he,{selectedDate:e,onChange:s,weekProps:n});case"day":return Object(r.jsx)(pe,{selectedDate:e,onChange:s});default:return""}})(),Object(r.jsxs)("div",{children:[Object(r.jsx)(y.Button,Object.assign({onClick:()=>s(new Date,"selectedDate")},{children:"Сегодня"})),j.length>1&&(d?j.map(e=>Object(r.jsx)(y.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>s(e,"view"),onDragOver:t=>{t.preventDefault(),s(e,"view")}},{children:ve(e)}),e)):Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(y.IconButton,Object.assign({style:{padding:5},onClick:e=>{u(e.currentTarget)}},{children:Object(r.jsx)(fe.a,{})})),Object(r.jsx)(y.Popover,Object.assign({open:Boolean(c),anchorEl:c,onClose:e=>{u()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:Object(r.jsx)(y.MenuList,Object.assign({autoFocusItem:!!c,disablePadding:!0},{children:j.map(e=>Object(r.jsx)(y.MenuItem,Object.assign({selected:e===t,onClick:()=>{u(),s(e,"view")}},{children:e}),e))}))}))]}))]})]}))};var xe=n(20),we=n.n(xe);const _e=({type:e,value:t,label:n,name:a,onChange:s,variant:i,modalVariant:c,error:o,errMsg:l})=>{const d="date"===e?le.a:we.a;return Object(r.jsx)(ce,{children:Object(r.jsx)(d,{value:t,label:n,onChange:e=>s(a,new Date(e||"")),minutesStep:5,renderInput:e=>Object(r.jsx)(y.TextField,Object.assign({variant:i,helperText:o?l:"",error:o,style:{width:"100%"}},e))})})};_e.defaultProps={type:"datetime",variant:"outlined",modalVariant:"inline"};const De=({variant:e,label:t,placeholder:n,value:s,name:i,required:c,min:o,max:l,email:d,decimal:j,onChange:u,disabled:b,multiline:O,rows:h,touched:p})=>{const[g,f]=Object(a.useState)({touched:!1,valid:!1,errorMsg:""});Object(a.useEffect)(()=>{p&&v(s)},[p]);const v=e=>{let t=e,n=!0,r="";if(d){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,r="Invalid Email"}if(j){n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,r="Only Numbers Allowed"}o&&(""+t).trim().length<o&&(n=!1,r=`Minimum ${o} letters`),l&&(""+t).trim().length>l&&(n=!1,r=`Maximum ${l} letters`),c&&(""+t).trim().length<=0&&(n=!1,r="Required"),f({touched:!0,valid:n,errorMsg:r}),u(i,t,n)};return Object(r.jsx)(y.TextField,{variant:e,label:t&&Object(r.jsx)(y.Typography,Object.assign({variant:"body2"},{children:`${t} ${c?"*":""}`})),value:s,name:i,onChange:e=>v(e.target.value),disabled:b,error:g.touched&&!g.valid,helperText:g.touched&&!g.valid&&g.errorMsg,multiline:O,rows:h,style:{width:"100%"},InputProps:{placeholder:n||""}})};De.defaultProps={variant:"outlined"};var ke=n(21),Ce=n.n(ke);const Me=({options:e,value:t,name:n,required:s,onChange:i,label:c,disabled:o,touched:l,variant:d,loading:j,multiple:u,placeholder:b,errMsg:O})=>{const h=Object(y.useTheme)(),[p,g]=Object(a.useState)({touched:!1,valid:!!t,errorMsg:O||(s?"Required":void 0)});Object(a.useEffect)(()=>{l&&f(t)},[l]);const f=e=>{let t=e,r=!0,a=O;!s||(u?t.length:t)||(r=!1,a="Required"),g(e=>Object.assign(Object.assign({},e),{touched:!0,valid:r,errorMsg:a})),i(n,t,r)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(y.FormControl,Object.assign({variant:d||"outlined",fullWidth:!0,error:s&&p.touched&&!p.valid,disabled:o},{children:[c&&Object(r.jsx)(y.InputLabel,Object.assign({id:"input_"+n},{children:Object(r.jsx)(y.Typography,Object.assign({variant:"body2"},{children:`${c} ${s?"*":""}`}))})),Object(r.jsxs)(y.Select,Object.assign({label:c,labelId:"input_"+n,value:t,onBlur:()=>{p.touched||g(e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:O||e.errorMsg}))},onChange:e=>f(e.target.value),IconComponent:j?()=>Object(r.jsx)(y.CircularProgress,{size:5}):Ce.a,multiple:!!u,classes:{select:"chips"===u?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return Object(r.jsx)("em",{children:c});let n=[];if(u){for(const r of e)t.includes(r.value)&&n.push([r.text]);return"chips"===u?n.map((e,t)=>Object(r.jsx)(y.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`)):n.join(",")}for(const r of e)t===r.value&&n.push([r.text]);return n.join(",")}},{children:[b&&Object(r.jsx)(y.MenuItem,Object.assign({value:""},{children:Object(r.jsx)("em",{children:b})})),e.map(e=>Object(r.jsxs)(y.MenuItem,Object.assign({value:e.value},{children:[u&&Object(r.jsx)(y.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value))]}))]})),Object(r.jsx)(y.FormHelperText,Object.assign({style:{color:h.palette.error.main}},{children:p.touched&&!p.valid&&p.errorMsg}))]})};Me.defaultProps={variant:"outlined"};var Te=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const Se=(e,t)=>{var n;const r={};for(const a of e){const e=i(a,a.default,t),s=i(a,null==t?void 0:t[a.name],t);r[a.name]={value:s.value||e.value||"",validity:!(null===(n=a.config)||void 0===n?void 0:n.required)||(!!s.validity||!!e.validity),type:a.type,config:a.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},r)};var Ie=()=>{const{fields:e,dialog:t,triggerDialog:n,selectedRange:i,selectedEvent:c,triggerLoading:o,onConfirm:l,customEditor:d,confirmEvent:j,dialogMaxWidth:u}=v(),[b,O]=Object(a.useState)(Se(e,c||i)),[h,p]=Object(a.useState)(!1),g=Object(y.useTheme)(),f=Object(y.useMediaQuery)(g.breakpoints.down("sm")),m=(e,t,n)=>{O(r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{value:t,validity:n})}))},x=t=>{t&&O(Se(e)),n(!1)},w=()=>Te(void 0,void 0,void 0,(function*(){let e={};for(const t in b)if(e[t]=b[t].value,!d&&!b[t].validity)return p(!0);try{o(!0),e.end=e.start>=e.end?Object(s.addMinutes)(e.start,Object(s.differenceInMinutes)(null==i?void 0:i.end,null==i?void 0:i.start)):e.end;const t=(null==c?void 0:c.event_id)?"edit":"create";l?e=yield l(e,t):e.event_id=(null==c?void 0:c.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),j(e,t),x(!0)}catch(e){console.error(e)}finally{o(!1)}})),_=t=>{const n=b[t];switch(n.type){case"input":return Object(r.jsx)(De,Object.assign({value:n.value,name:t,onChange:m,touched:h},n.config));case"date":return Object(r.jsx)(_e,Object.assign({value:n.value,name:t,onChange:(...e)=>m(...e,!0)},n.config));case"select":const a=e.find(e=>e.name===t);return Object(r.jsx)(Me,Object.assign({value:n.value,name:t,options:(null==a?void 0:a.options)||[],onChange:m,touched:h},n.config));default:return""}};return Object(r.jsx)(y.Dialog,Object.assign({open:t,fullScreen:f,maxWidth:u},{children:(()=>{if(d){return d({state:b,close:()=>n(!1),loading:e=>o(e),edited:c,onConfirm:j})}return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(y.DialogTitle,{children:c?"Edit Event":"Add Event"}),Object(r.jsx)(y.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:Object(r.jsx)(y.Grid,Object.assign({container:!0,spacing:1},{children:Object.keys(b).map(e=>{var t;const n=b[e];return Object(r.jsx)(y.Grid,Object.assign({item:!0,sm:null===(t=n.config)||void 0===t?void 0:t.sm,xs:12},{children:_(e)}),e)})}))})),Object(r.jsxs)(y.DialogActions,{children:[Object(r.jsx)(y.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>x()},{children:"Cancel"})),Object(r.jsx)(y.Button,Object.assign({color:"primary",fullWidth:!0,onClick:w},{children:"Confirm"}))]})]})})()}))};var Ee=({events:e,today:t,eachWeekStart:n,daysList:i,onViewMore:c,cellHeight:o})=>{const l=Math.round((o-27)/28-1),d=n.some(e=>Object(s.isSameDay)(e,t))?t:null,j=e.filter(e=>!(!d||!Object(s.isWithinInterval)(d,{start:Object(s.startOfDay)(e.start),end:Object(s.endOfDay)(e.end)}))||Object(s.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime());return Object(r.jsx)(a.Fragment,{children:j.map((a,o)=>{const u=!!d&&Object(s.isBefore)(a.start,d),b=u&&d?d:a.start;let O=Object(s.differenceInDays)(a.end,b)+1;const h=O>=i.length;if(h){const e=Object(s.startOfWeek)(a.start),t=Object(s.closestTo)(e,n);t&&(O=i.length-(d?0:Object(s.differenceInDays)(a.start,t)))}const p=e.filter(e=>!d&&e.event_id!==a.event_id&&l>o&&Object(s.isBefore)(e.start,Object(s.startOfDay)(t))&&Object(s.isAfter)(e.end,Object(s.startOfDay)(t)));let g=o;p.length&&(g+=p.length);const f=28*g+27;return g>l?"":g===l?Object(r.jsx)(y.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:f,fontSize:11},onClick:e=>{e.stopPropagation(),c(a.start)}},{children:Math.abs(j.length-o)+" More..."}),o):Object(r.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:f,width:100*O+"%"}},{children:Object(r.jsx)(B,{event:a,showdate:!1,multiday:Object(s.differenceInDays)(a.end,a.start)>0,hasPrev:u,hasNext:h})}),o)})})},Fe=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const Pe=()=>{const{month:e,selectedDate:t,height:n,events:i,handleGotoDay:o,remoteEvents:l,triggerLoading:d,triggerDialog:j,handleState:u,resources:b,resourceFields:O,fields:h,locale:p}=v(),{weekStartOn:g,weekDays:f,startHour:m,endHour:x,cellRenderer:w}=e,_=Object(s.startOfMonth)(t),D=Object(s.endOfMonth)(t),k=Object(s.eachWeekOfInterval)({start:_,end:D},{weekStartsOn:g}),C=f.map(e=>Object(s.addDays)(k[0],e)),M=n/k.length,T=Object(y.useTheme)(),S=Object(a.useCallback)(()=>Fe(void 0,void 0,void 0,(function*(){try{d(!0);const e=k[0],t=`?start=${e}&end=${Object(s.addDays)(k[k.length-1],C.length)}`,n=yield l(t);n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{d(!1)}})),[t]);Object(a.useEffect)(()=>{l instanceof Function&&S()},[S]);const I=e=>{let n=i;e&&(n=c(i,e,O,h));const l=[];for(const i of k){const c=f.map(c=>{const l=Object(s.addDays)(i,c),d=new Date(""+Object(s.format)(Object(s.setHours)(l,m),"yyyy/MM/dd hh:mm a")),u=new Date(""+Object(s.format)(Object(s.setHours)(l,x),"yyyy/MM/dd hh:mm a")),b=O.idField;return Object(r.jsxs)("span",Object.assign({style:{height:M},className:"rs__cell"},{children:[w?w({day:t,start:d,end:u,height:M,onClick:()=>j(!0,{start:d,end:u,[b]:e?e[b]:null}),[b]:e?e[b]:null}):Object(r.jsx)(J,{start:d,end:u,resourceKey:b,resourceVal:e?e[b]:null}),Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(y.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:Object(s.isToday)(l)?T.palette.secondary.main:"transparent",color:Object(s.isToday)(l)?T.palette.secondary.contrastText:"",marginBottom:2}},{children:Object(r.jsx)(y.Typography,Object.assign({color:Object(s.isSameMonth)(l,_)?"textPrimary":"#ccc",className:"rs__hover__op",onClick:e=>{e.stopPropagation(),o(l)}},{children:Object(s.format)(l,"dd")}))})),Object(r.jsx)(Ee,{events:n,today:l,eachWeekStart:k,daysList:C,onViewMore:o,cellHeight:M})]})]}),c.toString())});l.push(Object(r.jsx)(a.Fragment,{children:c},i.toString()))}return l},E=e=>Object(r.jsxs)(N,Object.assign({days:C.length,indent:"0"},{children:[C.map((e,t)=>Object(r.jsx)("span",Object.assign({className:"rs__cell rs__header"},{children:Object(r.jsx)(y.Typography,Object.assign({align:"center",variant:"body2"},{children:Object(s.format)(e,"EE",{locale:p})}))}),t)),I(e)]}));return b.length?Object(r.jsx)(Z,{renderChildren:E}):E()};var We=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))};const $e=()=>{const{day:e,selectedDate:t,events:n,height:i,triggerDialog:d,remoteEvents:j,triggerLoading:u,handleState:b,resources:O,resourceFields:h,fields:p,direction:g,locale:m}=v(),{startHour:x,endHour:w,step:_,cellRenderer:D}=e,k=Object(s.setMinutes)(Object(s.setHours)(t,x),0),C=Object(s.setMinutes)(Object(s.setHours)(t,w),0),M=Object(s.eachMinuteOfInterval)({start:k,end:C},{step:_}),T=l(i,M.length),S=o(T,_),I=n.sort((e,t)=>t.end.getTime()-e.end.getTime()),E=Object(a.useCallback)(()=>We(void 0,void 0,void 0,(function*(){try{u(!0);const e=Object(s.addDays)(k,-1),t=`?start=${e}&end=${Object(s.addDays)(C,1)}`,n=yield j(t);n&&(null==n?void 0:n.length)&&b(n,"events")}catch(e){throw e}finally{u(!1)}})),[t]);Object(a.useEffect)(()=>{j instanceof Function&&E()},[E]);const F=e=>{const n=e.filter(e=>Object(s.differenceInDays)(e.end,e.start)>0&&Object(s.isWithinInterval)(t,{start:Object(s.startOfDay)(e.start),end:Object(s.endOfDay)(e.end)}));return Object(r.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*n.length}},{children:n.map((e,n)=>{const a=Object(s.isBefore)(e.start,Object(s.startOfDay)(t)),i=Object(s.isAfter)(e.end,Object(s.endOfDay)(t));return Object(r.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*n,width:"100%"}},{children:Object(r.jsx)(B,{event:e,multiday:!0,hasPrev:a,hasNext:i})}),e.event_id)})}))},P=e=>{let i=I;e&&(i=c(I,e,h,p));const o=28*n.filter(e=>Object(s.differenceInDays)(e.end,e.start)>0&&Object(s.isWithinInterval)(t,{start:Object(s.startOfDay)(e.start),end:Object(s.endOfDay)(e.end)})).length+45;return Object(r.jsxs)(N,Object.assign({days:1},{children:[Object(r.jsx)("span",{className:"rs__cell"}),Object(r.jsxs)("span",Object.assign({className:"rs__cell rs__header "+(Object(s.isToday)(t)?"rs__today_cell":""),style:{height:o}},{children:[Object(r.jsx)(f,{date:t,locale:m}),F(i)]})),M.map((n,c)=>{const o=new Date(`${Object(s.format)(t,"yyyy/MM/dd")} ${Object(s.format)(n,"hh:mm a")}`),l=new Date(`${Object(s.format)(t,"yyyy/MM/dd")} ${Object(s.format)(Object(s.addMinutes)(n,_),"hh:mm a")}`),j=h.idField;return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:T}},{children:Object(r.jsx)(y.Typography,Object.assign({variant:"caption"},{children:Object(s.format)(n,"hh:mm a",{locale:m})}))})),Object(r.jsxs)("span",Object.assign({className:"rs__cell "+(Object(s.isToday)(t)?"rs__today_cell":"")},{children:[0===c&&Object(r.jsx)(ee,{todayEvents:i.filter(e=>!Object(s.differenceInDays)(e.end,e.start)&&Object(s.isSameDay)(t,e.start)),today:t,minuteHeight:S,startHour:x,step:_,direction:g}),D?D({day:t,start:o,end:l,height:T,onClick:()=>d(!0,{start:o,end:l,[j]:e?e[j]:null}),[j]:e?e[j]:null}):Object(r.jsx)(J,{start:o,end:l,resourceKey:j,resourceVal:e?e[j]:null})]}))]},c)})]}))};return O.length?Object(r.jsx)(Z,{span:2,renderChildren:P}):P()},Ne=()=>{const{loading:e,view:t,dialog:n,resources:s,resourceViewMode:i}=v(),c=Object(a.useMemo)(()=>{switch(t){case"month":return Object(r.jsx)(Pe,{});case"week":return Object(r.jsx)(ne,{});case"day":return Object(r.jsx)($e,{});default:return""}},[t]);return Object(r.jsxs)(W,{children:[e&&Object(r.jsx)("div",Object.assign({className:"rs__table_loading"},{children:Object(r.jsxs)("span",{children:[Object(r.jsx)(y.CircularProgress,{size:50}),Object(r.jsx)(y.Typography,Object.assign({align:"center"},{children:"Loading..."}))]})})),Object(r.jsx)(me,{}),Object(r.jsx)("div",Object.assign({className:"rs__outer_table"},{children:Object(r.jsx)($,Object.assign({resource_count:"tabs"===i?1:s.length},{children:c}))})),n&&Object(r.jsx)(Ie,{})]})},qe=e=>Object(r.jsx)(g,Object.assign({initial:e},{children:Object(r.jsx)(Ne,{})}));qe.defaultProps=u}]);